# Hardhat Web UI 产品需求文档
为hardhat提供一个web UI，方便用户查看区块链上的信息。

## 部署和运行方式
- 作为hardhat插件，通过npm安装
- 以node作为后端服务器
- npx hardhat --network <network> web-ui
- 连接的区块链网络取决于hardhat
- 访问http://localhost:3337查看web UI

## 前端设计
- 前端页面使用express渲染
- 前端UI使用bootstrap框架，实现响应式布局和美观的用户界面
- 前端设计需要考虑合理的布局和交互设计，以提供良好的用户体验。
- 需要考虑页面的拆分和组件化设计，以便于维护和扩展。

### 0. 导航条
- 导航菜单
- 显示当前连接的以太坊网络名称和Chain ID
- 实时更新网络连接状态
- 查询功能：查询区块、交易、账户、合约等

### 2. 区块列表页 /block
- 展示区块列表，包含区块号、哈希、时间戳和交易数量
- 支持查看区块详情，包括区块哈希、父哈希、矿工地址、Gas使用情况等

### 3. 区块详情页 /block/:blockNumber
- 显示能从区块中提取到的所有信息

### 4. 交易列表页 /transaction
- 显示最近交易记录，包含交易哈希、区块号、发送方、接收方和交易金额

### 5. 交易详情页 /transaction/:txHash
- 显示交易详情，包括交易哈希、区块号、发送方、接收方、交易金额、Gas价格和Gas限制等

### 4. 账户列表页  /account
- 列出所有账户地址及其余额
- 支持账户地址复制功能
- 如果是合约地址，提供跳转链接到合约详情页


### 5. 智能合约 /contract（当前已有功能）
- 展示智能合约地址列表
- 支持查看合约详情

### 6. 智能合约详情 /contract/:contractId （当前已有功能）
- 当从智能合约列表中选择一个合约时，显示合约的详细信息，包括合约地址、合约代码、合约ABI等
- 合约操作页面：调用合约方法、发送交易、部署合约等；
- 支持下拉菜单选择signer操作合约（数据来源/api/account）

## 后端API
- 使用Express.js作为后端框架，通过以太坊JSON-RPC接口获取区块链数据
- 后端需要同时serve前端页面和API接口
- 所有API路由使用/api前缀
- 由于是本地开发使用，不需要考虑鉴权和安全性问题
- 后端设计需要考虑合理的路由设计和数据结构，以便于前端调用展示数据。
- 后端设计需要考虑合理的错误处理和异常处理，以便于前端展示错误信息和提示用户。
- 后端设计需要考虑合理拆分路由和文件组织，以便于维护和扩展。

### 1. 获取区块列表
- GET /api/block
- 参数：page（页码），batchSize（每页显示的区块数量）
- 返回：区块列表，包含区块号、哈希、时间戳和交易数量

### 2. 获取区块详情
- GET /api/block/:blockNumber
- 参数：blockNumber（区块号）
- 返回：区块详情，包含区块哈希、父哈希、矿工地址、Gas使用情况等

### 3. 获取交易列表
- GET /api/transaction
- 参数：page（页码），batchSize（每页显示的交易数量）
- 返回：交易列表，包含交易哈希、区块号、发送方、接收方和交易金额

### 4. 获取交易详情
- GET /api/transaction/:txHash
- 参数：txHash（交易哈希）
- 返回：交易详情，包含交易哈希、区块号、发送方、接收方、交易金额、Gas价格和Gas限制等

### 5. 获取账户列表
- GET /api/account
- 返回：账户列表，包含账户地址及其余额

### 6. 获取智能合约列表
- GET /api/contract
- 返回：智能合约列表，包含合约地址、合约名称、合约ABI等

### 7. 获取智能合约详情
- GET /api/contract/:contractId
- 参数：contractId（合约地址）
- 返回：合约详情，包含合约地址、合约代码、合约ABI等

## 调试功能
- 插件开发阶段：需要nodemon热加载功能，当文件发生变化时，自动重新加载页面
- node控制台打印必要的信息和日志
- 调试功能需要考虑合理的日志级别和输出格式，以便于调试和问题排查。